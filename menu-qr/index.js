document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href"),n=document.querySelector(t),o=document.querySelector("nav").offsetHeight,a=n.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:a-o-20,behavior:"smooth"}),mobileNavMenu.classList.contains("open")&&closeMobileMenu()})});const scrollRevealElements=document.querySelectorAll(".scroll-reveal"),observerOptions={root:null,rootMargin:"0px",threshold:.1},observer=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))})},observerOptions);scrollRevealElements.forEach(e=>{observer.observe(e)});const newsletterSignupBtn=document.getElementById("newsletter-signup-btn"),newsletterEmailInput=document.getElementById("newsletter-email"),newsletterRulesAccept=document.getElementById("newsletter-rules-accept");newsletterSignupBtn.addEventListener("click",async()=>{if(!0==newsletterRulesAccept.checked){let e=newsletterEmailInput.value.trim();if(!e||!/\S+@\S+\.\S+/.test(e)){openModal("Błąd","Prosimy wpisać poprawny adres e-mail.");return}let t=await fetch("https://api.twojawidocznosc.online/newsletter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});t.ok?(openModal("Sukces!",`Dziękujemy, że zapisałeś się do naszego newslettera <a class="important">${e}!</a> Oczekuj pierwszych maili, kt\xf3re wspomogą twoją widoczność w sieci.`),newsletterEmailInput.value=""):openModal(":(",`Nie udało nam się zapisać ciebie do newslettera, spr\xf3buj ponownie lub zgłoś błąd na maila <a class="important">kontakt@twojawidocznosc.online</a> <br> Przepraszamy`)}else openModal("Błąd","Musisz zaakceptować regulamin i politykę prywatności, żebyśmy mogli cię zapisać do newslettera.")});const universalModal=document.getElementById("universal-modal"),modalCloseBtn=document.getElementById("modal-close-btn"),modalTitle=document.getElementById("modal-title"),modalBody=document.getElementById("modal-body");function openModal(e,t){modalTitle.textContent=e,modalBody.innerHTML=t,universalModal.classList.add("open")}function closeModal(){universalModal.classList.remove("open"),setTimeout(()=>{modalTitle.textContent="",modalBody.textContent=""},300)}modalCloseBtn.addEventListener("click",closeModal),universalModal.addEventListener("click",e=>{e.target===universalModal&&closeModal()});const contactForm=document.getElementById("contact-form");contactForm.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("contact-email").value.trim(),n=document.getElementById("contact-message").value.trim();if(!t||!n){openModal("Błąd","Prosimy o wypełnienie wszystkich p\xf3l, abyśmy mogli wysłać twoją wiadomość.");return}if(!/\S+@\S+\.\S+/.test(t)){openModal("Błąd","Prosimy o wpisanie prawidłowego adresu E-mail, abyśmy mogli odpowiedzieć na twoją wiadomość.");return}let o={email:t,message:n,source:window.location.href},a=await fetch("https://api.twojawidocznosc.online/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});a.ok?(openModal("Wiadomość Wysłana!",`Dziękujemy! Twoja wiadomość została do nas wysłana i skontaktujemy się z Tobą wkr\xf3tce.`),contactForm.reset()):openModal(":(",`Nie udało nam się wysłać twojej wiadmości, spr\xf3buj ponownie lub wyślij nam maila bezpośrednio na <a class="important">kontakt@twojawidocznosc.online</a> <br> Przepraszamy`)}),document.querySelectorAll(".accordion-header").forEach(e=>{e.addEventListener("click",()=>{let t=document.getElementById(`accordion-content-${e.dataset.accordion}`),n=e.classList.contains("active");document.querySelectorAll(".accordion-header.active").forEach(t=>{t!==e&&(t.classList.remove("active"),document.getElementById(`accordion-content-${t.dataset.accordion}`).classList.remove("open"))}),n?(e.classList.remove("active"),t.classList.remove("open")):(e.classList.add("active"),t.classList.add("open"))})});const hamburgerMenu=document.getElementById("hamburger-menu"),mobileNavMenu=document.getElementById("mobile-nav-menu");function toggleMobileMenu(){hamburgerMenu.classList.toggle("open"),mobileNavMenu.classList.toggle("open"),document.body.style.overflow=mobileNavMenu.classList.contains("open")?"hidden":""}function closeMobileMenu(){hamburgerMenu.classList.remove("open"),mobileNavMenu.classList.remove("open"),document.body.style.overflow=""}hamburgerMenu.addEventListener("click",toggleMobileMenu),mobileNavMenu.addEventListener("click",e=>{e.target===mobileNavMenu&&closeMobileMenu()}),document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded");let e=document.getElementById("cookie-banner"),t=document.getElementById("accept-all-cookies"),n=document.getElementById("reject-all-cookies"),o=document.getElementById("manage-cookies-btn"),a=document.getElementById("cookie-preferences-modal"),i=document.getElementById("close-cookie-preferences"),l=document.getElementById("save-cookie-preferences"),s=document.getElementById("cookie-necessary"),r=document.getElementById("cookie-analytics"),c=document.getElementById("cookie-marketing"),d="cookie_consent";function g(e,t,n){let o="";if(n){let a=new Date;a.setTime(a.getTime()+864e5*n),o="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/; SameSite=Lax"}function m(e){let t=e+"=",n=document.cookie.split(";");for(let o=0;o<n.length;o++){let a=n[o];for(;" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}function p(e){if(e.analytics){document.querySelectorAll('script[src*="googletagmanager"]').forEach(e=>e.remove()),document.querySelectorAll("script").forEach(e=>{e.textContent.includes("gtag('config'")&&e.remove()});let t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-5TNWGGYCWS",document.head.appendChild(t),t.onload=()=>{function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-5TNWGGYCWS"),console.log("Google Analytics loaded.")};var n,o,a,i,l="clarity",s="script";n=window,o=document,n[l]=n[l]||function(){(n[l].q=n[l].q||[]).push(arguments)},(a=o.createElement(s)).async=1,a.src="https://www.clarity.ms/tag/s3k8lgr3qk",(i=o.getElementsByTagName(s)[0]).parentNode.insertBefore(a,i)}else window["ga-disable-G-5TNWGGYCWS"]=!0,console.log("Google Analytics disabled.");if(e.marketing){document.querySelectorAll('script[src*="connect.facebook.net/en_US/fbevents.js"]').forEach(e=>e.remove()),document.querySelectorAll("script").forEach(e=>{e.textContent.includes("fbq('init'")&&e.remove()});var r,c,d,g,m,p="script";if(r=window,c=document,r.fbq||(d=r.fbq=function(){d.callMethod?d.callMethod.apply(d,arguments):d.queue.push(arguments)},r._fbq||(r._fbq=d),d.push=d,d.loaded=!0,d.version="2.0",d.queue=[],(g=c.createElement(p)).async=!0,g.src="https://connect.facebook.net/en_US/fbevents.js",(m=c.getElementsByTagName(p)[0]).parentNode.insertBefore(g,m)),fbq("init","1263416628463015"),fbq("track","PageView"),console.log("Meta Pixel loaded."),"function"==typeof gtag)gtag("config","AW-YOUR_CONVERSION_ID"),console.log("Google Ads loaded (via gtag).");else{let u=document.createElement("script");u.async=!0,u.src="https://www.googletagmanager.com/gtag/js?id=AW-YOUR_CONVERSION_ID",document.head.appendChild(u),u.onload=()=>{function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","AW-YOUR_CONVERSION_ID"),console.log("Google Ads loaded (separate gtag).")}}}else"function"==typeof fbq&&console.log("Meta Pixel disabled/not loaded."),window["ga-disable-AW-YOUR_CONVERSION_ID"],window["ga-disable-AW-YOUR_CONVERSION_ID"]=!0,console.log("Google Ads disabled."),console.log("Marketing trackers disabled/not loaded.")}function u(){console.log("initializeConsent");let e=m(d);if(e){let t=JSON.parse(e);p(t),f(),r.checked=t.analytics,c.checked=t.marketing}else y()}function y(){e.classList.remove("translate-y-full"),e.classList.add("translate-y-0")}function f(){e.classList.remove("translate-y-0"),e.classList.add("translate-y-full")}function v(){a.classList.remove("pointer-events-none","opacity-0"),a.classList.add("opacity-100");let e=m(d);if(e){let t=JSON.parse(e);r.checked=t.analytics,c.checked=t.marketing}else r.checked=!1,c.checked=!1}function h(){a.classList.remove("opacity-100"),a.classList.add("opacity-0","pointer-events-none")}t.addEventListener("click",()=>{let e={necessary:!0,analytics:!0,marketing:!0};g(d,JSON.stringify(e),365),p(e),f()}),n.addEventListener("click",()=>{let e={necessary:!0,analytics:!1,marketing:!1};g(d,JSON.stringify(e),365),p(e),f()}),o.addEventListener("click",()=>{f(),v()}),i.addEventListener("click",()=>{h(),m(d)||y()}),l.addEventListener("click",()=>{let e={necessary:s.checked,analytics:r.checked,marketing:c.checked};g(d,JSON.stringify(e),365),p(e),h(),location.reload()}),u(),document.getElementById("open-cookie-preferences-footer").addEventListener("click",e=>{e.preventDefault(),v()})});const activeLine=document.querySelector(".process-timeline-line-active"),sectionToMonitor=document.getElementById("process-timeline"),timelineItems=document.querySelectorAll(".process-timeline-item");function updateTimelineForSection(){let e=sectionToMonitor.getBoundingClientRect(),t=window.innerHeight,n=e.height,o=0;if(e.top<t/2&&e.bottom>t/2){let a=t/2-e.top;o=a/n*100}else e.top>=t/2?o=0:e.bottom<=t/2&&(o=100);o=Math.max(0,Math.min(100,o)),activeLine.style.height=`${o}%`,timelineItems.forEach(t=>{if("process-timeline-item-first"!=t.id){let n=t.getBoundingClientRect(),a=n.top+n.height/2-e.top,i=a/e.height*100;o>=i-5?(t.classList.add("active"),t.classList.add("active-reveal")):t.classList.remove("active")}})}window.addEventListener("scroll",updateTimelineForSection),document.addEventListener("DOMContentLoaded",updateTimelineForSection);const sloganElement=document.querySelector("#hero-text-typing"),words=["Nowoczesna","Oszczędna","Wygodna","Atrakcyjna"],typingSpeed=80,deletingSpeed=60,pauseBetweenWords=1400,pauseBeforeDeleting=250,pauseAfterDeleting=150;let wordIndex=0,charIndex=0,isDeleting=!1,currentWord="";function typeSlogan(){let e=words[wordIndex];isDeleting?charIndex>0?(currentWord=e.substring(0,charIndex-1),1==charIndex?sloganElement.textContent="​":sloganElement.textContent=currentWord,charIndex--,setTimeout(typeSlogan,60)):(isDeleting=!1,wordIndex=(wordIndex+1)%words.length,sloganElement.textContent="​",setTimeout(typeSlogan,150)):charIndex<e.length?(currentWord=e.substring(0,charIndex+1),sloganElement.textContent=currentWord,charIndex++,setTimeout(typeSlogan,80)):(isDeleting=!0,setTimeout(typeSlogan,1650))}window.addEventListener("load",()=>{sloganElement.textContent=" |",typeSlogan()});const baseDuration=200,durationMultiplier=1;function animateValue(e,t,n,o){let a=null,i=l=>{a||(a=l);let s=Math.min((l-a)/o,1);e.textContent=Math.floor(s*(n-t)+t),s<1?requestAnimationFrame(i):e.textContent=n};requestAnimationFrame(i)}function handlePricingAnimation(){let e=document.querySelectorAll(".price-animate"),t=document.querySelector("#pricing"),n=t.getBoundingClientRect().top,o=window.innerHeight;n<.45*o&&(e.forEach(e=>{let t=parseInt(e.getAttribute("data-target"),10);e.textContent!==t.toString()&&animateValue(e,0,t,200+1*t)}),window.removeEventListener("scroll",handlePricingAnimation))}window.addEventListener("load",handlePricingAnimation),window.addEventListener("scroll",handlePricingAnimation);